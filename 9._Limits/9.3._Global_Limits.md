# [9.3. Global Limits](https://www.openldap.org/doc/admin26/limits.html#Global%20Limits)

サーバー設定の全体的な部分で指定されている制限値は、データベースが特定の制限値を指定していない場合のデフォルトとして機能する。

＜キーワードの違い＞

- `slapd.conf(5)`

  - `sizelimit`
  - `timelimit`

- `slapd config` バックエンド
  - `olcSizeLimit`
  - `olcTimeLimit`

---

ソフトとハードの制限値を同じ値にする場合のシンプルな形式

```text
sizelimit {<integer>|unlimited}
timelimit {<integer>|unlimited}
```

- `sizelimit` の初期値: 500 エントリー
- `timelimit` の初期値: 3600 秒

---

ソフトとハードの制限値を別々に設定する場合の形式

```text
sizelimit size[.{soft|hard}]=<integer> [...]
timelimit size[.{soft|hard}]=<integer> [...]
```

例）サイズの制限値のソフトを 10 エントリー、ハードを 75 エントリーに設定する場合

```text
sizelimit size.soft=10 size.hard=75
```

## [9.3.1. Special Size Limits](https://www.openldap.org/doc/admin26/limits.html#Special%20Size%20Limits)

ソフトとハードの制限値に加えてサイズ制限については他の形式がある。  
ただし、 `sizelimit` 形式を使っている時は、それらの特殊な制限値は変更されない。

### 9.3.1.1. Unchecked Limits

`unchecked` キーワードは、サーバーがインデックスの照会を実行した後、フィルターの一致を評価する前に、評価対象のエントリー数を制限するのに使われる。  
検索候補数がこの制限値を超える場合、検索処理は失敗する。  
この制限値の目的は、適切にインデックスが設定されていない属性を検索フィルターが使っていたり、非常に大きなディレクトリにはサービスダウンに繋がりかねなかったりする場合に、極めて大きな負荷がかかることを防止すること。

```text
sizelimit size.unchecked={<integer>|unlimited|disabled}
```

デフォルトは `unlimited`。
`disabled` はすべての検索を禁止する。この設定は、特殊な一握りのユーザーに対して検索を禁止するために、データベースごとで制限値をかける際に有用。

### 9.3.1.2. Paged Results Limits

もし LDAP クライアントが検索操作に `pagedResultsControl` を追加している場合、デフォルトではハード リミットが使われる（特定のページ サイズに対するリクエストは、返却されるエントリー数に対する制限の明示的なリクエストとみなされるため）。  
しかし、サイズ制限は単一ページに対してではなく、その検索で返却されるエントリーの総数に適用される。

追加のサイズ制限により、ページ分割された検索に制限をかけることができる。

```text
sizelimit size.pr={<integer>|noEstimate|unlimited}
```

- `<integer>`: 明示的なサイズが指定されていない場合の最大ページ数
- `noEstimate`: サーバーが検索数の見積もり値を返さないので、現行の実装では効果がない。
- `unlimited`: 最大のページ数に制限なし

`size.prtotal` はページ分割された検索で返却されるエントリー数の総数を制御する。デフォルト値は通常の `size.hard` と同じ。

```text
size.prtotal={<integer>|unlimited|disabled}
```

- `unlimited`: ページ分割された検索で返却されるエントリー数に制限なし
- `disabled`: 選択的にページ分割された結果の検索を無効にする
